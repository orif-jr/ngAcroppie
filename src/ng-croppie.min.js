!function(){"use strict";angular.module("ngCroppie",[]).directive("ngCroppie",["$timeout",function(o){return{restrict:"AE",scope:{src:"=",rotation:"=",viewport:"=",boundry:"=",type:"@",zoom:"@",mousezoom:"@",zoomslider:"@",exif:"@",enforceBoundary:"@",orientation:"@",update:"=",ngModel:"=",mobile:"@"},link:function(n,o,e){void 0===n.viewport&&(n.viewport={w:null,h:null}),void 0===n.boundry&&(n.boundry={w:null,h:null}),"true"===n.mobile?(n.viewport.w=250,n.viewport.h=250,n.boundry.w=300,n.boundry.h=300):(n.viewport.w=void 0!==n.viewport.w?n.viewport.w:300,n.viewport.h=void 0!==n.viewport.h?n.viewport.h:300,n.boundry.w=void 0!==n.boundry.w?n.boundry.w:400,n.boundry.h=void 0!==n.boundry.h?n.boundry.h:400),n.viewport.w>n.boundry.w&&(n.viewport.w=n.boundry.w),n.viewport.h>n.boundry.h&&(n.viewport.h=n.boundry.h);var t="true"===n.zoom||void 0===n.zoom,r="true"===n.mousezoom||void 0===n.mousezoom,i="true"===n.zoomslider||void 0===n.zoomslider,u={viewport:{width:n.viewport.w,height:n.viewport.h,type:n.type||"square"},boundary:{width:n.boundry.w,height:n.boundry.h},enableZoom:t,mouseWheelZoom:r,showZoomer:i,enableExif:n.exif,enforceBoundary:n.enforceBoundary,enableOrientation:n.orientation};void 0!==n.update&&(u.update=n.update);var a,d=new Croppie(o[0],u),l=angular.element(o[0])[0];angular.element(o[0].getElementsByClassName("cr-boundary"))[0].getBoundingClientRect();l.addEventListener("mousedown",function(){a=window.setInterval(function(){d.result("canvas").then(function(o){n.$apply(function(){n.ngModel=o})})},100)},!1),r&&(l.addEventListener("mousewheel",function(o){o.preventDefault(),d.result("canvas").then(function(o){n.$apply(function(){n.ngModel=o})})},!1),l.addEventListener("DOMMouseScroll",function(o){o.preventDefault(),d.result("canvas").then(function(o){n.$apply(function(){n.ngModel=o})})},!1)),l.addEventListener("mouseup",function(){clearInterval(a)},!1),l.addEventListener("mouseleave",function(){clearInterval(a)},!1),l.addEventListener("mouseout",function(){clearInterval(a)},!1),n.$on("$destroy",function(o){clearInterval(a)}),n.$watch("rotation",function(o,e){if("false"===n.orientation||void 0===n.orientation)throw"ngCroppie: Cannot rotate without 'orientation' option";d.rotate(o-e),d.result("canvas").then(function(o){n.$apply(function(){n.ngModel=o})})}),n.$watch("src",function(o,e){if(void 0===n.src)throw"ngCroppie: Image source undefined!";d.bind(n.src),window.setInterval(function(){d.result("canvas").then(function(o){n.$apply(function(){n.ngModel=o})})},0)})}}}])}();